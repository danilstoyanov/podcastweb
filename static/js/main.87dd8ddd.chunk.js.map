{"version":3,"sources":["panels/Start.js","components/AudioEditor.js","panels/Create.js","panels/Post.js","panels/Final.js","App.js","index.js"],"names":["Start","id","goToPanel","stretched","header","icon","action","size","onClick","AudioEditor","props","audio","audioDuration","waveForm","useState","isPlaying","setIsPlaying","trackRef","useRef","waveFormRef","timelineRef","visorRef","useEffect","current","addEventListener","event","target","scrollLeft","className","ref","style","left","ticks","minutes","seconds","i","tick","value","type","time","push","map","key","nanoid","cn","drawTimeLine","item","height","window","currentAudio","stop","clearInterval","playInterval","context","AudioContext","source","createBufferSource","decodeAudioData","decodedAudioBuffer","buffer","connect","destination","start","setInterval","prev","Number","replace","playAudio","fill","ImagePreview","imageSrc","onResetPreviewClick","src","Create","post","setPostState","title","setTitle","description","setDescription","setAudio","audioTitle","setAudioTitle","audioStepActive","setAudioStepActive","preview","setPreview","setWaveForm","setAudioDuration","isBadWords","setIsBadWords","isExcludeEpisode","setIsExcludeEpisode","isTrailer","setIsTrailer","timecodes","setTimecodes","handleTimecodeInputChange","field","console","log","Fragment","controlSize","mode","name","before","onChange","file","startsWith","reader","FileReader","onload","result","readAsDataURL","handleImageUpload","files","top","placeholder","display","alignItems","justifyContent","background","marginRight","padding","flexGrow","borderRadius","weight","color","fontSize","marginTop","marginBottom","audioContext","binaryAudioData","bufferCopy","slice","then","audioBuffer","options","audio_context","audio_buffer","scale","Promise","resolve","reject","WaveformData","createFromAudio","err","waveform","reasmpledWaveForm","resample","width","duration","channel","arr","x","length","val","max_sample","Math","floor","readAsArrayBuffer","handleAudioUpload","alert","level","caps","filter","handleTimecodeRemove","viewBox","xmlns","d","maxLength","marginLeft","flexShrink","some","Post","Final","App","activePanel","setActivePanel","panelName","bridge","send","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.87dd8ddd.chunk.js","sourcesContent":["import React from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Placeholder from '@vkontakte/vkui/dist/components/Placeholder/Placeholder';\n\nimport { Icon56AddCircleOutline, Icon12Cancel } from \"@vkontakte/icons\";\n\nconst Start = ({ id, goToPanel }) => {\n  const handleCreateButtonClick = () => {\n    goToPanel('create')\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>Подкасты</PanelHeader>\n  \n      <Placeholder\n        stretched\n        header=\"Добавьте первый подкаст\"\n        icon={<Icon56AddCircleOutline />}\n        action={<Button size=\"m\" onClick={handleCreateButtonClick}>Добавить подкаст</Button>}\n      >\n        Добавляйте, редактируйте и делитесь подкастами вашего сообщества\n      </Placeholder>\n    </Panel>\n  );\n}\n\nexport default Start;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport cn from 'classnames';\n\nimport { Icon28Play, Icon28Pause } from '@vkontakte/icons';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport { nanoid } from \"nanoid\";\n\nexport const AudioEditor = (props) => {\n  const { audio, audioDuration, waveForm } = props;\n\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  const trackRef = useRef();\n  const waveFormRef = useRef();\n  const timelineRef = useRef();\n  const visorRef = useRef();\n\n  useEffect(() => {\n    waveFormRef.current.addEventListener('scroll', event => {\n      const {target} = event;\n      timelineRef.current.scrollLeft = target.scrollLeft;\n    })\n\n    timelineRef.current.addEventListener('scroll', event => {\n      const {target} = event;\n      waveFormRef.current.scrollLeft = target.scrollLeft;\n    })\n  }, [])\n\n  const drawTimeLine = () => {\n    const ticks = [];\n\n    let minutes = 0;\n    let seconds = 0;\n\n    for(let i = 0; i < audioDuration; i++) {\n      const tick = {\n        value: i,\n      };\n\n      seconds += 1;\n\n      if(seconds === 60) {\n        minutes += 1;\n        seconds = 0;\n      }\n\n      if(i % 10 === 0) {\n        tick.type = 'Tick--Large';\n\n        if(i !== 0) {\n          tick.time = `${minutes > 10 ? minutes : '0' + minutes}:${seconds < 9 ? '0' + seconds - 1 : seconds - 1}`\n        }\n      } else if(i % 2 === 0) {\n        tick.type = 'Tick--Medium';\n      } else {\n        tick.type = 'Tick--Small';\n      }\n\n      ticks.push(tick)\n    }\n\n    return <div className=\"Timeline\" ref={timelineRef}>\n      {ticks.map(tick => {\n        return <div key={nanoid()} className={cn(\"Tick\", tick.type)}>\n          {tick.type === \"Tick--Large\" && (\n            <span className=\"TickTime\">{tick.time}</span>\n          )}\n        </div>\n      })}\n    </div>\n  }\n\n  const drawWaveForm = () => {\n    return <div className=\"WaveForm\" ref={waveFormRef}>\n      {waveForm.map(item => {\n        return <div key={nanoid()} className=\"WaveItem\" style={{height: item}}></div>\n      })}\n    </div>\n  }\n\n  const playAudio = (event) => {\n    const context = new AudioContext();\n    const source = context.createBufferSource();\n\n    context.decodeAudioData(audio, (decodedAudioBuffer) => {\n      source.buffer = decodedAudioBuffer;\n      source.connect(context.destination);\n      source.start(0);\n\n      setIsPlaying(true);\n\n      // грязные хаки с глобальным контекстом\n      window.currentAudio = source;\n      window.playInterval = setInterval(() => {\n        const prev = Number(visorRef.current.style.left.replace('px', ''));\n        visorRef.current.style.left = (prev + 4) + 'px';\n      }, 300)\n    })\n  }\n\n  const stopAudio = () => {\n    if(!window.currentAudio) {\n      return;\n    }\n\n    window.currentAudio.stop();\n\n    clearInterval(window.playInterval);\n    setIsPlaying(false);\n  }\n\n  return (\n    <Div>\n      <div className=\"TrackWrapper\" ref={trackRef}>\n        <div className=\"Visor\" ref={visorRef} style={{ left: \"16px\" }}></div>\n\n        <div className=\"TrackContent\">\n          {drawTimeLine()}\n          {drawWaveForm()}\n        </div>\n\n        <div className=\"Controls\">\n          <button\n            className=\"Controls_Play\"\n            onClick={() => {\n              if (isPlaying) {\n                stopAudio();\n                return;\n              }\n\n              playAudio();\n            }}\n          >\n            {isPlaying ? (\n              <Icon28Pause fill=\"#fff\" />\n            ) : (\n              <Icon28Play fill=\"#fff\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </Div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport WaveformData from \"waveform-data\";\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport File from \"@vkontakte/vkui/dist/components/File/File\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport {\n  FormLayout,\n  Input,\n  Text,\n  Caption,\n  Textarea,\n  Placeholder,\n  Button,\n  Separator,\n  Checkbox,\n} from \"@vkontakte/vkui\";\n\nimport { AudioEditor } from \"../components/AudioEditor\";\n\nimport {\n  Icon12Cancel,\n  Icon28PictureOutline,\n  Icon28PodcastOutline,\n} from \"@vkontakte/icons\";\n\nimport PanelHeaderBack from \"@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack\";\n\nconst ImagePreview = ({ imageSrc, onResetPreviewClick }) => {\n  return (\n    <div className=\"ImagePreview\">\n      <button onClick={onResetPreviewClick}>\n        <Icon12Cancel fill=\"#FFF\" />\n      </button>\n\n      <img src={imageSrc} />\n    </div>\n  );\n};\n\nconst Create = ({ id, goToPanel, post, setPostState }) => {\n  const [title, setTitle] = useState(post.title);\n  const [description, setDescription] = useState(post.description);\n\n  const [audio, setAudio] = useState(null);\n  const [audioTitle, setAudioTitle] = useState(post.audioTitle);\n  const [audioStepActive, setAudioStepActive] = useState(false);\n\n  const [preview, setPreview] = useState(post.preview);\n  const [waveForm, setWaveForm] = useState([]);\n  const [audioDuration, setAudioDuration] = useState(0);\n\n  const [isBadWords, setIsBadWords] = useState(false);\n  const [isExcludeEpisode, setIsExcludeEpisode] = useState(false);\n  const [isTrailer, setIsTrailer] = useState(false);\n\n  const [timecodes, setTimecodes] = useState(post.timecodes);\n\n  const handleBackClick = () => {\n    if (audioStepActive) {\n      setAudioStepActive(false);\n\n      return;\n    }\n\n    goToPanel(\"start\");\n  };\n\n  const handleAudioUpload = (file) => {\n    if (!file.type.startsWith(\"audio/\")) {\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onload = (event) => {\n      const audioContext = new AudioContext();\n\n      const binaryAudioData = event.target.result;\n      const bufferCopy = binaryAudioData.slice(0);\n\n      audioContext\n        .decodeAudioData(binaryAudioData)\n        .then((audioBuffer) => {\n          const options = {\n            audio_context: audioContext,\n            audio_buffer: audioBuffer,\n            scale: 512,\n          };\n\n          return new Promise((resolve, reject) => {\n            WaveformData.createFromAudio(options, (err, waveform) => {\n              if (err) {\n                reject(err);\n              } else {\n                resolve(waveform);\n              }\n            });\n          });\n        })\n        .then((waveform) => {\n          const reasmpledWaveForm = waveform.resample({\n            width: waveform.duration,\n          });\n          const channel = reasmpledWaveForm.channel(0);\n          const arr = [];\n\n          for (let x = 0; x < reasmpledWaveForm.length; x++) {\n            let val = 0;\n\n            if (channel.max_sample(x) < 1) {\n              arr.push(2);\n              continue;\n            }\n\n            // Для лучшего контраста\n            if (x % 3 === 0) {\n              val = channel.max_sample(x) / 4;\n            } else {\n              val = channel.max_sample(x) / 3;\n            }\n\n            arr.push(val);\n          }\n\n          setWaveForm(arr);\n          setAudioDuration(Math.floor(waveform.duration));\n          setAudioTitle(file.name);\n        });\n\n      setAudio(bufferCopy);\n    };\n\n    reader.readAsArrayBuffer(file);\n  };\n\n  const handleImageUpload = (file) => {\n    if (!file.type.startsWith(\"image/\")) {\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onload = (event) => {\n      setPreview(event.target.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const handleImageResetClick = () => {\n    setPreview(null);\n  };\n\n  const handleTimecodeAdd = () => {\n    if (timecodes.some((item) => item.time === \"\" && item.description === \"\")) {\n      alert(\"Заполните предидущий таймкод\");\n\n      return;\n    }\n\n    setTimecodes([...timecodes, { id: nanoid(), time: \"\", description: \"\" }]);\n  };\n\n  const handleTimecodeRemove = (id) => {\n    setTimecodes(timecodes.filter((item) => item.id !== id));\n  };\n\n  const handleTimecodeInputChange = (id, field, value) => {\n    setTimecodes(\n      timecodes.map((item) => {\n        if (item.id !== id) {\n          return item;\n        }\n\n        item[field] = value;\n\n        return item;\n      })\n    );\n  };\n\n  console.log(post, 'post')\n\n  const handleFormSubmit = () => {\n    setPostState({\n      title,\n      description,\n      audioTitle,\n      preview,\n      timecodes\n    })\n\n    goToPanel(\"post\")\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader left={<PanelHeaderBack onClick={handleBackClick} />}>\n        {audioStepActive ? \"Редактирование\" : \"Новый подкаст\"}\n      </PanelHeader>\n\n      {!audioStepActive && (\n        <React.Fragment>\n          <Div>\n            <div className=\"PreviewSection\">\n              {preview ? (\n                <ImagePreview\n                  imageSrc={preview}\n                  onResetPreviewClick={handleImageResetClick}\n                />\n              ) : (\n                <File\n                  className=\"FileInputWrapper\"\n                  controlSize=\"xl\"\n                  mode=\"tertiary\"\n                  name=\"preview\"\n                  before={<Icon28PictureOutline />}\n                  onChange={(event) => {\n                    handleImageUpload(event.target.files[0]);\n                  }}\n                />\n              )}\n\n              <FormLayout>\n                <Input\n                  top=\"Название\"\n                  name=\"title\"\n                  value={title}\n                  onChange={({ target }) => {\n                    setTitle(target.value);\n                  }}\n                  placeholder=\"Введите название подкаста\"\n                />\n              </FormLayout>\n            </div>\n          </Div>\n\n          <FormLayout>\n            <Textarea\n              placeholder=\"\"\n              top=\"Описание подкаста\"\n              value={description}\n              onChange={({ target }) => {\n                setDescription(target.value);\n              }}\n            />\n          </FormLayout>\n\n          {audio ? (\n            <Div>\n              <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                <div\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    background: \"#F2F3F5\",\n                    marginRight: 12,\n                    padding: 12,\n                    flexGrow: 0,\n                    borderRadius: 12,\n                  }}\n                >\n                  <Icon28PodcastOutline fill=\"#99A2AD\" />\n                </div>\n                <Text weight=\"medium\">{audioTitle}</Text>\n              </div>\n\n              <Text\n                style={{\n                  color: \"#818C99\",\n                  fontSize: \"13px\",\n                  marginTop: \"8px\",\n                  marginBottom: \"16px\",\n                }}\n              >\n                Вы можете добавить таймкоды и скорректировать подкаст в режиме\n                редактирования\n              </Text>\n\n              <Button\n                size=\"xl\"\n                mode=\"outline\"\n                style={{ marginBottom: \"4px\" }}\n                onClick={() => {\n                  setAudioStepActive(true);\n                }}\n              >\n                Редактировать аудиозапись\n              </Button>\n            </Div>\n          ) : (\n            <Placeholder\n              header=\"Загрузите ваш подкаст\"\n              action={\n                <File\n                  size=\"m\"\n                  mode=\"outline\"\n                  top=\"Загрузите подкаст\"\n                  before={null}\n                  onChange={(event) => {\n                    handleAudioUpload(event.target.files[0]);\n                  }}\n                />\n              }\n            >\n              Выберите готовый аудиофайл из вашего телефона и добавьте его\n            </Placeholder>\n          )}\n\n          <Separator />\n\n          <div className=\"SettingsSection\">\n            <FormLayout>\n              <Checkbox\n                value={isBadWords}\n                onChange={() => {\n                  setIsBadWords(!isBadWords);\n                }}\n              >\n                Ненормативный контент\n              </Checkbox>\n              <Checkbox\n                value={isExcludeEpisode}\n                onChange={() => {\n                  setIsExcludeEpisode(!isExcludeEpisode);\n                }}\n              >\n                Исключить эпизод из экспорта\n              </Checkbox>\n              <Checkbox\n                value={isTrailer}\n                onChange={() => {\n                  setIsTrailer(!isTrailer);\n                }}\n              >\n                Трейлер подкаста\n              </Checkbox>\n            </FormLayout>\n          </div>\n\n          <Div\n            onClick={() => {\n              alert(\"Заглушчека ^_^\");\n            }}\n          >\n            <Text weight=\"medium\" style={{ marginBottom: 4 }}>\n              Кому доступен данный подкаст\n            </Text>\n            <Caption level=\"3\" style={{ color: \"#818C99\" }}>\n              Всем пользователям\n            </Caption>\n\n            <Caption level=\"1\" style={{ marginTop: 16, color: \"#818C99\" }}>\n              При публикации записи с эпизодом, он становится доступным для всех\n              пользователей\n            </Caption>\n          </Div>\n\n          <Div>\n            <Button size=\"xl\" onClick={handleFormSubmit}>Далее</Button>\n          </Div>\n        </React.Fragment>\n      )}\n\n      {audioStepActive && (\n        <React.Fragment>\n          <AudioEditor\n            audio={audio}\n            audioDuration={audioDuration}\n            waveForm={waveForm}\n          />\n\n          <Div>\n            <Caption\n              level=\"1\"\n              weight=\"semibold\"\n              caps\n              style={{ marginBottom: 16, color: \"#818C99\" }}\n            >\n              Таймкоды\n            </Caption>\n\n            {timecodes.map(({ id, time, description }) => {\n              return (\n                <div\n                  key={id}\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    marginBottom: 16,\n                  }}\n                  className=\"TimecodeItem\"\n                >\n                  <div\n                    onClick={() => {\n                      handleTimecodeRemove(id);\n                    }}\n                    style={{ marginRight: 8 }}\n                  >\n                    <svg\n                      width=\"22\"\n                      height=\"22\"\n                      viewBox=\"0 0 22 22\"\n                      fill=\"none\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11C0 4.92487 4.92487 0 11 0ZM16 10H6C5.44772 10 5 10.4477 5 11C5 11.5523 5.44772 12 6 12H16C16.5523 12 17 11.5523 17 11C17 10.4477 16.5523 10 16 10Z\"\n                        fill=\"#E64646\"\n                      />\n                    </svg>\n                  </div>\n\n                  <Input\n                    value={description}\n                    placeholder=\"Описание\"\n                    style={{ marginRight: 8, flexGrow: 1 }}\n                    onChange={({ target }) => {\n                      handleTimecodeInputChange(\n                        id,\n                        \"description\",\n                        target.value\n                      );\n                    }}\n                  />\n\n                  <Input\n                    value={time}\n                    type=\"text\"\n                    maxLength=\"5\"\n                    placeholder=\"00:00\"\n                    style={{ marginLeft: 8, flexShrink: 1 }}\n                    onChange={({ target }) => {\n                      handleTimecodeInputChange(id, \"time\", target.value);\n                    }}\n                  />\n                </div>\n              );\n            })}\n\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                marginBottom: 16,\n              }}\n              onClick={handleTimecodeAdd}\n            >\n              <div>\n                <svg\n                  width=\"22\"\n                  height=\"22\"\n                  viewBox=\"0 0 22 22\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11C0 4.92487 4.92487 0 11 0ZM11 5C10.4477 5 10 5.44772 10 6V10H6C5.48716 10 5.06449 10.386 5.00673 10.8834L5 11C5 11.5523 5.44772 12 6 12H10V16C10 16.5128 10.386 16.9355 10.8834 16.9933L11 17C11.5523 17 12 16.5523 12 16V12H16C16.5128 12 16.9355 11.614 16.9933 11.1166L17 11C17 10.4477 16.5523 10 16 10H12V6C12 5.48716 11.614 5.06449 11.1166 5.00673L11 5Z\"\n                    fill=\"#3F8AE0\"\n                  />\n                </svg>\n              </div>\n\n              <Text style={{ color: \"#3F8AE0\", fontSize: 16, marginLeft: 12 }}>\n                Добавить таймкод\n              </Text>\n            </div>\n\n            <Caption level=\"1\" style={{ color: \"#818C99\" }}>\n              Отметки времени с названием темы. Позволяют слушателям легче\n              путешествовать по подкасту.\n            </Caption>\n          </Div>\n        </React.Fragment>\n      )}\n    </Panel>\n  );\n};\n\nexport default Create;\n","import React from 'react';\nimport {Caption, Button, Text, Title, Separator} from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport PanelHeaderBack from \"@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\n\nconst Post = ({ id, post, goToPanel }) => {\n  const { title, description, audioTitle, preview, timecodes} = post;\n\n  const handlePublishClick = () => {\n    goToPanel('final');\n  }\n\n  return (\n    <Panel id={id}>\n      <PanelHeader left={<PanelHeaderBack onClick={() => {}} />}>\n        Новый подкаст\n      </PanelHeader>\n\n      <Div>\n        <div style={{display: 'flex', alignItems: 'center'}}>\n          <div className=\"PostPreview\" style={{marginRight: 12}}>\n            <img src={preview} />\n          </div>\n          <div>\n            <Title level=\"3\" weight=\"bold\" style={{marginBottom: 4}}>{title}</Title>\n            <Caption level=\"2\" style={{color: '#4986CC', marginBottom: 4}}>Автор подкаста</Caption>\n            <Caption level=\"2\" style={{color: '#818C99'}}>Длительность: 32:31</Caption>\n          </div>\n        </div>\n      </Div>\n\n      <Separator />\n\n      <Div>\n        <Title level=\"3\" weight=\"bold\" style={{marginBottom: 8, marginTop: 8}}>Описание</Title>\n        <Text style={{marginBottom: 8}}>{description}</Text>\n      </Div>\n\n      <Separator />\n\n      <Div>\n        <Title level=\"3\" weight=\"bold\" style={{marginBottom: 16, marginTop: 8}}>Содержание</Title>\n        {timecodes.length === 0 && (\n          <Text>Вы не создали таймкоды для подкаста</Text>\n        )}\n\n        {timecodes.map(({id, time, description}) => (\n          <div key={id} style={{display: 'flex', alignItems: 'center', marginBottom: 16}}>\n            <Caption style={{color: '#4986CC', marginRight: 6}}>{time}</Caption> — <Caption style={{marginLeft: 6}}>{description}</Caption>\n          </div>\n        ))}\n      </Div>\n\n      <Separator />\n\n      <Div>\n        <Button style={{marginTop: 16}} size=\"xl\" onClick={handlePublishClick}>Опубликовать подкаст</Button>\n      </Div>\n    </Panel>\n  );\n}\n\nexport default Post;\n","import React from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Placeholder from '@vkontakte/vkui/dist/components/Placeholder/Placeholder';\nimport { Icon56CheckCircleOutline } from \"@vkontakte/icons\";\n\nconst Final = ({ id, goToPanel }) => {\n  return (\n    <Panel id={id} stretched>\n      <PanelHeader>Подкасты</PanelHeader>\n  \n      <Placeholder\n        stretched\n        header=\"Подкаст добавлен\"\n        icon={<Icon56CheckCircleOutline fill=\"#3F8AE0\" />}\n        action={<Button size=\"m\" onClick={() => { alert('Это всё ^_^\\nМожете обновить страничку') }}>Поделиться подкастом</Button>}\n      >\n        Раскажите своим подписчикам о новом подкасте, чтобы получить больше слушателей.\n      </Placeholder>\n    </Panel>\n  );\n}\n\nexport default Final;\n","import React, { useState } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Start from './panels/Start';\nimport Create from './panels/Create';\nimport Post from './panels/Post';\nimport Final from './panels/Final';\n\nimport './main.css';\n\nconst App = () => {\n  const [activePanel, setActivePanel] = useState('start');\n  const [post, setPostState] = useState({\n    title: '',\n    description: '',\n    audioTitle: '',\n    preview: null,\n    timecodes: []\n  })\n\n  const goToPanel = panelName => {\n    setActivePanel(panelName);\n  };\n\n  return (\n    <View activePanel={activePanel}>\n      <Start\n        id=\"start\"\n        goToPanel={goToPanel}\n      />\n\n      <Create\n        id=\"create\"\n        goToPanel={goToPanel}\n        post={post}\n        setPostState={setPostState}\n      />\n\n      <Post\n        id=\"post\"\n        goToPanel={goToPanel}\n        post={post}\n      />\n\n      <Final\n        id=\"final\"\n        goToPanel={goToPanel}\n      />\n    </View>\n  );\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}